<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1164px" preserveAspectRatio="none" style="width:908px;height:1164px;background:#F2EEE6;" version="1.1" viewBox="0 0 908 1164" width="908px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="18" lengthAdjust="spacing" textLength="265" x="321" y="29.4023">iiideaをON(アクティベート)する</text><rect fill="#FFFFFF" height="29.3105" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="129.6875"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="129.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="129.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="129.6875" y2="129.6875"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="199.9531" y2="273.8848"/><rect fill="#FFFFFF" height="833.4453" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="1148.2852" y2="1148.2852"/><rect fill="#FFFFFF" height="8" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="646.5" y="150.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="646.5" y1="150.998" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="656.5" x2="656.5" y1="150.998" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="656.5" y1="150.998" y2="150.998"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="646.5" y="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="646.5" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;" x1="656.5" x2="656.5" y1="199.9531" y2="273.8848"/><rect fill="#FFFFFF" height="833.4453" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="646.5" y="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="646.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="656.5" x2="656.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="656.5" y1="1148.2852" y2="1148.2852"/><rect fill="#F3F0F0" height="233.3711" style="stroke:#000000;stroke-width:2.0;" width="878" x="10" y="906.9141"/><rect fill="#F3F0F0" height="186.75" style="stroke:none;stroke-width:1.0;" width="878" x="10" y="953.5352"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="119.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="38" x2="38" y1="158.998" y2="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="38" x2="38" y1="273.8848" y2="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="314.8398" y2="1157.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="119.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="225" x2="225" y1="158.998" y2="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="225" x2="225" y1="273.8848" y2="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="314.8398" y2="1157.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="651" x2="651" y1="119.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="651" x2="651" y1="158.998" y2="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="651" x2="651" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="651" x2="651" y1="273.8848" y2="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="651" x2="651" y1="314.8398" y2="1157.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="869" x2="869" y1="119.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="869" x2="869" y1="158.998" y2="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="869" x2="869" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="869" x2="869" y1="273.8848" y2="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="869" x2="869" y1="314.8398" y2="1157.2852"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="14" lengthAdjust="spacing" textLength="31" x="20" y="116.7344">User</text><ellipse cx="38.5" cy="50.1992" fill="#EEEEEE" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M38.5,58.1992 L38.5,85.1992 M25.5,66.1992 L51.5,66.1992 M38.5,85.1992 L25.5,100.1992 M38.5,85.1992 L51.5,100.1992 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><rect fill="#FFFFFF" height="34.0215" style="stroke:#111111;stroke-width:1.5;" width="87" x="182" y="84.666"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="73" x="189" y="108.1016">YourApp</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="619" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="626" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="33" x="635" y="108.1016">SDK</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="837" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="844" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="49" x="845" y="108.1016">Cloud</text><rect fill="#FFFFFF" height="29.3105" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="129.6875"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="129.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="129.6875" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="129.6875" y2="129.6875"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="199.9531" y2="273.8848"/><rect fill="#FFFFFF" height="833.4453" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="1148.2852" y2="1148.2852"/><rect fill="#FFFFFF" height="8" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="646.5" y="150.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="646.5" y1="150.998" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="656.5" x2="656.5" y1="150.998" y2="158.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="656.5" y1="150.998" y2="150.998"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="646.5" y="199.9531"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="646.5" y1="199.9531" y2="273.8848"/><line style="stroke:#222222;stroke-width:1.0;" x1="656.5" x2="656.5" y1="199.9531" y2="273.8848"/><rect fill="#FFFFFF" height="833.4453" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="646.5" y="314.8398"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="646.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="656.5" x2="656.5" y1="314.8398" y2="1148.2852"/><line style="stroke:#222222;stroke-width:1.0;" x1="646.5" x2="656.5" y1="1148.2852" y2="1148.2852"/><polygon fill="#444444" points="634.5,146.998,644.5,150.998,634.5,154.998,638.5,150.998" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="640.5" y1="150.998" y2="150.998"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="298" x="237.5" y="146.2559">ERAuth.getInstance().initialize(Context context)</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" lengthAdjust="spacing" textLength="313" x="299" y="183.6328">ログイン済み ー iiideaは対象のERAppletクラスのインスタンス</text><polygon fill="#444444" points="208.5,232.5742,218.5,236.5742,208.5,240.5742,212.5,236.5742" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="38.5" x2="214.5" y1="236.5742" y2="236.5742"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="104" x="45.5" y="216.5215">PreferenceUIから</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="73" x="45.5" y="231.832">iiideaに設定</text><polygon fill="#444444" points="634.5,261.8848,644.5,265.8848,634.5,269.8848,638.5,265.8848" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="640.5" y1="265.8848" y2="265.8848"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="130" x="237.5" y="261.1426">認証セッションを更新</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" lengthAdjust="spacing" textLength="143" x="382.5" y="298.5195">「認証情報を更新する」参照</text><path d="M235,319.8398 L235,359.8398 L649,359.8398 L649,329.8398 L639,319.8398 L235,319.8398 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><path d="M639,319.8398 L639,329.8398 L649,329.8398 L639,319.8398 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="47" x="241" y="337.4082">iiideaの</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="273" x="288" y="337.4082">アクティベート前に必ずPreference設定が必要</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="39" x="561" y="337.4082">です。</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="393" x="241" y="352.7188">loadPreferences()を呼ぶとPreferenceを設定したことになります。</text><polygon fill="#444444" points="634.5,428.7031,644.5,432.7031,634.5,436.7031,638.5,432.7031" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="640.5" y1="432.7031" y2="432.7031"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="103" x="237.5" y="382.0293">loadPreferences(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="103" x="269.5" y="397.3398">ERApplet applet,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="112" x="269.5" y="412.6504">URL urlBaseFolder</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="237.5" y="427.9609">)</text><polygon fill="#444444" points="241.5,458.0137,231.5,462.0137,241.5,466.0137,237.5,462.0137" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="235.5" x2="645.5" y1="462.0137" y2="462.0137"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="210" x="247.5" y="457.2715">webView内にPreference画面を表示</text><polygon fill="#444444" points="49.5,487.3242,39.5,491.3242,49.5,495.3242,45.5,491.3242" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="43.5" x2="219.5" y1="491.3242" y2="491.3242"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="91" x="55.5" y="486.582">設定画面を表示</text><polygon fill="#444444" points="634.5,516.6348,644.5,520.6348,634.5,524.6348,638.5,520.6348" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38.5" x2="640.5" y1="520.6348" y2="520.6348"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="130" x="45.5" y="515.8926">Preference画面の操作</text><line style="stroke:#444444;stroke-width:1.0;" x1="656.5" x2="698.5" y1="549.9453" y2="549.9453"/><line style="stroke:#444444;stroke-width:1.0;" x1="698.5" x2="698.5" y1="549.9453" y2="562.9453"/><line style="stroke:#444444;stroke-width:1.0;" x1="657.5" x2="698.5" y1="562.9453" y2="562.9453"/><polygon fill="#444444" points="667.5,558.9453,657.5,562.9453,667.5,566.9453,663.5,562.9453" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="117" x="663.5" y="545.2031">Preference値の設定</text><polygon fill="#444444" points="667.5,603.5664,657.5,607.5664,667.5,611.5664,663.5,607.5664" style="stroke:#444444;stroke-width:1.0;"/><polygon fill="#444444" points="857.5,603.5664,867.5,607.5664,857.5,611.5664,861.5,607.5664" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="661.5" x2="863.5" y1="607.5664" y2="607.5664"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="189" x="673.5" y="587.5137">iiideaがwebサービスとの認証が</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="117" x="673.5" y="602.8242">必要な時の処理など</text><polygon fill="#444444" points="49.5,632.877,39.5,636.877,49.5,640.877,45.5,636.877" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43.5" x2="645.5" y1="636.877" y2="636.877"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="156" x="55.5" y="632.1348">Preference画面に値を更新</text><polygon fill="#444444" points="208.5,677.498,218.5,681.498,208.5,685.498,212.5,681.498" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="38.5" x2="214.5" y1="681.498" y2="681.498"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="97" x="45.5" y="661.4453">iiideaをON(利用</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="95" x="45.5" y="676.7559">可能状態に)する</text><polygon fill="#444444" points="634.5,752.7402,644.5,756.7402,634.5,760.7402,638.5,756.7402" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="640.5" y1="756.7402" y2="756.7402"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="91" x="237.5" y="706.0664">iiidea.activate(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="114" x="269.5" y="721.377">Contenxt context,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="360" x="269.5" y="736.6875">Completion2&lt;String[], ERServiceProxyData[]&gt; completion</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="269.5" y="751.998">)</text><polygon fill="#444444" points="667.5,797.3613,657.5,801.3613,667.5,805.3613,663.5,801.3613" style="stroke:#444444;stroke-width:1.0;"/><polygon fill="#444444" points="857.5,797.3613,867.5,801.3613,857.5,805.3613,861.5,801.3613" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="661.5" x2="863.5" y1="801.3613" y2="801.3613"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="189" x="673.5" y="781.3086">iiideaがwebサービスとの認証が</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="117" x="673.5" y="796.6191">必要な時の処理など</text><polygon fill="#444444" points="241.5,887.9141,231.5,891.9141,241.5,895.9141,237.5,891.9141" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="235.5" x2="645.5" y1="891.9141" y2="891.9141"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="75" x="247.5" y="825.9297">completion(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="49" x="279.5" y="841.2402">String[],</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="135" x="279.5" y="856.5508">ERServiceProxyData[],</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="45" x="279.5" y="871.8613">ERError</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="247.5" y="887.1719">)</text><path d="M10,906.9141 L72,906.9141 L72,913.9141 L62,923.9141 L10,923.9141 L10,906.9141 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="233.3711" style="stroke:#000000;stroke-width:2.0;" width="878" x="10" y="906.9141"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="920.4824">alt</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="417" x="87" y="919.5488">[completionのString[] / tERServiceProxyData[] / ERErrorが全てnull &lt;成功&gt;]</text><polygon fill="#444444" points="49.5,941.5352,39.5,945.5352,49.5,949.5352,45.5,945.5352" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43.5" x2="219.5" y1="945.5352" y2="945.5352"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="158" x="55.5" y="940.793">iiideaをONしたことを通知</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="888" y1="954.5352" y2="954.5352"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="166" x="15" y="965.1699">[nulll以外が戻ってくる &lt;失敗&gt;]</text><path d="M235,973.4902 L235,1105.4902 L878,1105.4902 L878,983.4902 L868,973.4902 L235,973.4902 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><path d="M868,973.4902 L868,983.4902 L878,983.4902 L868,973.4902 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="393" x="241" y="991.0586">外部のwebサービスを利用する場合や、OSに位置情報などの権限を</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="195" x="241" y="1006.3691">必要とする機能を利用する場合：</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="0" x="245" y="1021.6797"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="329" x="257" y="1036.9902">外部Webサービス利用に必要な認証情報が足りない場合:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="590" x="273" y="1052.3008">completionのERServiceProxyData[]にunauthorizedProxyListとして必要な情報リストが渡される。</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="0" x="245" y="1067.6113"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="229" x="257" y="1082.9219">OSから必要な権限が取れていない場合:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="538" x="273" y="1098.2324">completionのString[]にunauthorizedPermissionListとして必要な権限リストが渡される。</text><polygon fill="#444444" points="49.5,1128.2852,39.5,1132.2852,49.5,1136.2852,45.5,1132.2852" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="43.5" x2="219.5" y1="1132.2852" y2="1132.2852"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="104" x="55.5" y="1127.543">必要な設定を促す</text><!--MD5=[a2289252c9fea95ec86cdb42d2beda2e]
@startuml
title iiideaをON(アクティベート)する
hide footbox

skinparam DefaultFontName "Noto Sans JP, Helvetica, Arial, Liberation Sans"
skinparam BackgroundColor #F2EEE6
skinparam Shadowing false
skinparam NoteBackgroundColor #F9B5AD
skinparam NodeBorderColor #F26767

skinparam sequence {
ArrowColor #444444
ActorBorderColor Black
LifeLineBorderColor #222222
LifeLineBackgroundColor White
BoxBorderColor #FFFFFF
BoxBackgroundColor #F2fEf6
GroupBackgroundColor #FFFFFF
GroupBodyBackgroundColor #F3F0F0

ParticipantBorderColor #111111
ParticipantBackgroundColor White
ParticipantFontSize 17
ParticipantFontColor #111111
BoundaryBorderColor Gray
ActorBackgroundColor #eeeeee
ActorFontColor Black

}

actor User
participant YourApp as App
participant "Riiiver\nSDK" as ERSDK
participant "Riiiver\nCloud" as Riiiver

activate App

App -> ERSDK: ERAuth.getInstance().initialize(Context context)
activate ERSDK

... ログイン済み ー iiideaは対象のERAppletクラスのインスタンス...

User -> App: PreferenceUIから\niiideaに設定

App -> ERSDK: 認証セッションを更新
... 「認証情報を更新する」参照 ...
note right of App: iiideaの__アクティベート前に必ずPreference設定が必要__です。\nloadPreferences()を呼ぶとPreferenceを設定したことになります。
App -> ERSDK: loadPreferences(\n\tERApplet applet,\n\tURL urlBaseFolder\n)
App <- - ERSDK: webView内にPreference画面を表示
User <- App: 設定画面を表示
User - -> ERSDK: Preference画面の操作
ERSDK -> ERSDK: Preference値の設定
ERSDK <- -> Riiiver: iiideaがwebサービスとの認証が\n必要な時の処理など
User <- - ERSDK: Preference画面に値を更新

User -> App: iiideaをON(利用\n可能状態に)する
App -> ERSDK: iiidea.activate(\n\tContenxt context,\n\tCompletion2<String[], ERServiceProxyData[]> completion\n\t)
ERSDK <- -> Riiiver: iiideaがwebサービスとの認証が\n必要な時の処理など
App <- - ERSDK: completion(\n\tString[],\n\tERServiceProxyData[],\n\tERError\n)
alt completionのString[] / tERServiceProxyData[] / ERErrorが全てnull <成功>
    User <- - App: iiideaをONしたことを通知
else nulll以外が戻ってくる <失敗>
    note right of App
        外部のwebサービスを利用する場合や、OSに位置情報などの権限を
        必要とする機能を利用する場合：

            外部Webサービス利用に必要な認証情報が足りない場合:
                completionのERServiceProxyData[]にunauthorizedProxyListとして必要な情報リストが渡される。

            OSから必要な権限が取れていない場合:
                completionのString[]にunauthorizedPermissionListとして必要な権限リストが渡される。
    end note
    App -> User: 必要な設定を促す
end

@enduml

PlantUML version 1.2021.2(Sun Mar 07 20:10:27 JST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>