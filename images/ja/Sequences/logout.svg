<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="713px" preserveAspectRatio="none" style="width:798px;height:713px;background:#F2EEE6;" version="1.1" viewBox="0 0 798 713" width="798px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="18" lengthAdjust="spacing" textLength="214" x="294" y="29.4023">Riiiverからログアウトする</text><rect fill="#FFFFFF" height="29.3105" style="stroke:#222222;stroke-width:1.0;" width="10" x="531.5" y="180.3086"/><rect fill="#F3F0F0" height="343.0371" style="stroke:#000000;stroke-width:2.0;" width="782" x="10" y="346.5508"/><rect fill="#F3F0F0" height="177.8633" style="stroke:#000000;stroke-width:2.0;" width="521.5" x="20" y="504.7246"/><rect fill="#F3F0F0" height="88.9316" style="stroke:none;stroke-width:1.0;" width="521.5" x="20" y="593.6563"/><line style="stroke:#222222;stroke-width:1.0;" x1="48" x2="48" y1="119.6875" y2="282.2402"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="48" x2="48" y1="282.2402" y2="310.2402"/><line style="stroke:#222222;stroke-width:1.0;" x1="48" x2="48" y1="310.2402" y2="706.5879"/><line style="stroke:#222222;stroke-width:1.0;" x1="241" x2="241" y1="119.6875" y2="282.2402"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="241" x2="241" y1="282.2402" y2="310.2402"/><line style="stroke:#222222;stroke-width:1.0;" x1="241" x2="241" y1="310.2402" y2="706.5879"/><line style="stroke:#222222;stroke-width:1.0;" x1="536" x2="536" y1="119.6875" y2="282.2402"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="536" x2="536" y1="282.2402" y2="310.2402"/><line style="stroke:#222222;stroke-width:1.0;" x1="536" x2="536" y1="310.2402" y2="706.5879"/><line style="stroke:#222222;stroke-width:1.0;" x1="643" x2="643" y1="119.6875" y2="282.2402"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="643" x2="643" y1="282.2402" y2="310.2402"/><line style="stroke:#222222;stroke-width:1.0;" x1="643" x2="643" y1="310.2402" y2="706.5879"/><line style="stroke:#222222;stroke-width:1.0;" x1="749" x2="749" y1="119.6875" y2="282.2402"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="749" x2="749" y1="282.2402" y2="310.2402"/><line style="stroke:#222222;stroke-width:1.0;" x1="749" x2="749" y1="310.2402" y2="706.5879"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="14" lengthAdjust="spacing" textLength="31" x="30" y="116.7344">User</text><ellipse cx="48.5" cy="50.1992" fill="#EEEEEE" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M48.5,58.1992 L48.5,85.1992 M35.5,66.1992 L61.5,66.1992 M48.5,85.1992 L35.5,100.1992 M48.5,85.1992 L61.5,100.1992 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><rect fill="#FFFFFF" height="34.0215" style="stroke:#111111;stroke-width:1.5;" width="87" x="198" y="84.666"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="73" x="205" y="108.1016">YourApp</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="504" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="511" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="33" x="520" y="108.1016">SDK</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="128" x="579" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="45" x="620.5" y="88.0801">Safari</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="114" x="586" y="108.1016">(外部ブラウザ)</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="717" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="724" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="49" x="725" y="108.1016">Cloud</text><rect fill="#FFFFFF" height="29.3105" style="stroke:#222222;stroke-width:1.0;" width="10" x="531.5" y="180.3086"/><polygon fill="#444444" points="229.5,146.998,239.5,150.998,229.5,154.998,233.5,150.998" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="48.5" x2="235.5" y1="150.998" y2="150.998"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="51" x="55.5" y="146.2559">App起動</text><polygon fill="#444444" points="519.5,176.3086,529.5,180.3086,519.5,184.3086,523.5,180.3086" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="241.5" x2="525.5" y1="180.3086" y2="180.3086"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="147" x="248.5" y="175.5664">ERSDK.sharedInstance()</text><polygon fill="#444444" points="252.5,205.6191,242.5,209.6191,252.5,213.6191,248.5,209.6191" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246.5" x2="535.5" y1="209.6191" y2="209.6191"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="23" x="258.5" y="204.877">sdk</text><polygon fill="#444444" points="524.5,245.585,534.5,249.585,524.5,253.585,528.5,249.585" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="241.5" x2="530.5" y1="249.585" y2="249.585"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="225" x="248.5" y="244.8428">ERAuth.sharedInstance.isLoggedIn()</text><path d="M124,222.6191 L124,262.6191 L236,262.6191 L236,232.6191 L226,222.6191 L124,222.6191 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><path d="M226,222.6191 L226,232.6191 L236,232.6191 L226,222.6191 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="91" x="130" y="240.1875">ログイン済みか</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="65" x="130" y="255.498">確認する。</text><polygon fill="#444444" points="252.5,270.2402,242.5,274.2402,252.5,278.2402,248.5,274.2402" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246.5" x2="535.5" y1="274.2402" y2="274.2402"/><polygon fill="#444444" points="229.5,327.5508,239.5,331.5508,229.5,335.5508,233.5,331.5508" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="48.5" x2="235.5" y1="331.5508" y2="331.5508"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="65" x="55.5" y="326.8086">ログアウト</text><path d="M10,346.5508 L72,346.5508 L72,353.5508 L62,363.5508 L10,363.5508 L10,346.5508 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="343.0371" style="stroke:#000000;stroke-width:2.0;" width="782" x="10" y="346.5508"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="360.1191">alt</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="322" x="87" y="359.1855">[ERAuth.sharedInstance.isLoggedIn() == true (ログイン済)]</text><polygon fill="#444444" points="547.5,396.4824,537.5,400.4824,547.5,404.4824,543.5,400.4824" style="stroke:#444444;stroke-width:1.0;"/><polygon fill="#444444" points="737.5,396.4824,747.5,400.4824,737.5,404.4824,741.5,400.4824" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="541.5" x2="743.5" y1="400.4824" y2="400.4824"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="91" x="553.5" y="380.4297">ログイン済み。</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="117" x="553.5" y="395.7402">トークン取得済み。</text><polygon fill="#444444" points="524.5,456.4141,534.5,460.4141,524.5,464.4141,528.5,460.4141" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="241.5" x2="530.5" y1="460.4141" y2="460.4141"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="193" x="248.5" y="425.0508">ERAuth.sharedInstance.logout(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="129" x="280.5" y="440.3613">completion: &lt;Error&gt;</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="248.5" y="455.6719">)</text><polygon fill="#444444" points="252.5,485.7246,242.5,489.7246,252.5,493.7246,248.5,489.7246" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246.5" x2="535.5" y1="489.7246" y2="489.7246"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="109" x="258.5" y="484.9824">completion(error)</text><path d="M20,504.7246 L82,504.7246 L82,511.7246 L72,521.7246 L20,521.7246 L20,504.7246 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="177.8633" style="stroke:#000000;stroke-width:2.0;" width="521.5" x="20" y="504.7246"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="518.293">alt</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121" x="97" y="517.3594">[error == nil &lt;成功&gt;]</text><line style="stroke:#444444;stroke-width:1.0;" x1="241.5" x2="283.5" y1="543.3457" y2="543.3457"/><line style="stroke:#444444;stroke-width:1.0;" x1="283.5" x2="283.5" y1="543.3457" y2="556.3457"/><line style="stroke:#444444;stroke-width:1.0;" x1="242.5" x2="283.5" y1="556.3457" y2="556.3457"/><polygon fill="#444444" points="252.5,552.3457,242.5,556.3457,252.5,560.3457,248.5,556.3457" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="143" x="248.5" y="538.6035">ログアウト成功後の処理</text><polygon fill="#444444" points="59.5,581.6563,49.5,585.6563,59.5,589.6563,55.5,585.6563" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="53.5" x2="240.5" y1="585.6563" y2="585.6563"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="117" x="65.5" y="580.9141">ログアウトしました</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="541.5" y1="594.6563" y2="594.6563"/><line style="stroke:#444444;stroke-width:1.0;" x1="241.5" x2="283.5" y1="616.9668" y2="616.9668"/><line style="stroke:#444444;stroke-width:1.0;" x1="283.5" x2="283.5" y1="616.9668" y2="629.9668"/><line style="stroke:#444444;stroke-width:1.0;" x1="242.5" x2="283.5" y1="629.9668" y2="629.9668"/><polygon fill="#444444" points="252.5,625.9668,242.5,629.9668,252.5,633.9668,248.5,629.9668" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="281" x="248.5" y="612.2246">ログアウト失敗の処理(ネットワークエラーなど)</text><polygon fill="#444444" points="59.5,670.5879,49.5,674.5879,59.5,678.5879,55.5,674.5879" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="53.5" x2="240.5" y1="674.5879" y2="674.5879"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="169" x="65.5" y="654.5352">ログアウトに失敗しました。</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="34" x="65.5" y="669.8457">(理由)</text><!--MD5=[3422b5821b4d7c13abf13ba64c140ff6]
@startuml
title Riiiverからログアウトする
hide footbox

skinparam DefaultFontName "Noto Sans JP, Helvetica, Arial, Liberation Sans"
skinparam BackgroundColor #F2EEE6
skinparam Shadowing false
skinparam NoteBackgroundColor #F9B5AD
skinparam NodeBorderColor #F26767

skinparam sequence {
ArrowColor #444444
ActorBorderColor Black
LifeLineBorderColor #222222
LifeLineBackgroundColor White
BoxBorderColor #FFFFFF
BoxBackgroundColor #F2fEf6
GroupBackgroundColor #FFFFFF
GroupBodyBackgroundColor #F3F0F0

ParticipantBorderColor #111111
ParticipantBackgroundColor White
ParticipantFontSize 17
ParticipantFontColor #111111
BoundaryBorderColor Gray
ActorBackgroundColor #eeeeee
ActorFontColor Black

}

actor User
participant YourApp as App
participant "Riiiver\nSDK" as ERSDK
participant "Safari\n(外部ブラウザ)" as Safari
participant "Riiiver\nCloud" as Riiiver

User -> App: App起動

App -> ERSDK: ERSDK.sharedInstance()
activate ERSDK
App <- - ERSDK: sdk
deactivate ERSDK

App -> ERSDK: ERAuth.sharedInstance.isLoggedIn()
note left: ログイン済みか\n確認する。
ERSDK - -> App: 
...
User -> App: ログアウト
alt ERAuth.sharedInstance.isLoggedIn() == true (ログイン済)
    ERSDK <- - -> Riiiver: ログイン済み。\nトークン取得済み。
    App -> ERSDK: ERAuth.sharedInstance.logout(\n\tcompletion: <Error>\n)
    ERSDK - -> App: completion(error)
    alt error == nil <成功>
        App -> App: ログアウト成功後の処理
        App -> User: ログアウトしました
    else
        App -> App: ログアウト失敗の処理(ネットワークエラーなど)
        App -> User: ログアウトに失敗しました。\n(理由)
    end
end





@enduml

PlantUML version 1.2021.2(Sun Mar 07 20:10:27 JST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>