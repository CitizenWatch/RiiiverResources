<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1129px" preserveAspectRatio="none" style="width:773px;height:1129px;background:#F2EEE6;" version="1.1" viewBox="0 0 773 1129" width="773px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="18" lengthAdjust="spacing" textLength="265" x="253.5" y="29.4023">iiideaをON(アクティベート)する</text><rect fill="#FFFFFF" height="58.6211" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="129.6875"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="129.6875" y2="129.6875"/><rect fill="#FFFFFF" height="884.3086" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="1113.5723" y2="1113.5723"/><rect fill="#FFFFFF" height="37.3105" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="150.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="150.998" y2="150.998"/><rect fill="#FFFFFF" height="884.3086" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="1113.5723" y2="1113.5723"/><rect fill="#F3F0F0" height="233.3711" style="stroke:#000000;stroke-width:2.0;" width="684" x="10" y="872.2012"/><rect fill="#F3F0F0" height="186.75" style="stroke:none;stroke-width:1.0;" width="684" x="10" y="918.8223"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="38" x2="38" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="229.2637" y2="1122.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="225" x2="225" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="229.2637" y2="1122.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="516" x2="516" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="516" x2="516" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="516" x2="516" y1="229.2637" y2="1122.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="734" x2="734" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="734" x2="734" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="734" x2="734" y1="229.2637" y2="1122.5723"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="14" lengthAdjust="spacing" textLength="31" x="20" y="116.7344">User</text><ellipse cx="38.5" cy="50.1992" fill="#EEEEEE" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M38.5,58.1992 L38.5,85.1992 M25.5,66.1992 L51.5,66.1992 M38.5,85.1992 L25.5,100.1992 M38.5,85.1992 L51.5,100.1992 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><rect fill="#FFFFFF" height="34.0215" style="stroke:#111111;stroke-width:1.5;" width="87" x="182" y="84.666"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="73" x="189" y="108.1016">YourApp</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="484" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="491" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="33" x="500" y="108.1016">SDK</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="702" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="709" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="49" x="710" y="108.1016">Cloud</text><rect fill="#FFFFFF" height="58.6211" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="129.6875"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="129.6875" y2="129.6875"/><rect fill="#FFFFFF" height="884.3086" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="1113.5723" y2="1113.5723"/><rect fill="#FFFFFF" height="37.3105" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="150.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="150.998" y2="150.998"/><rect fill="#FFFFFF" height="884.3086" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="229.2637" y2="1113.5723"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="1113.5723" y2="1113.5723"/><polygon fill="#444444" points="499.5,146.998,509.5,150.998,499.5,154.998,503.5,150.998" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="150.998" y2="150.998"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="147" x="237.5" y="146.2559">ERSDK.sharedInstance()</text><polygon fill="#444444" points="241.5,176.3086,231.5,180.3086,241.5,184.3086,237.5,180.3086" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="235.5" x2="510.5" y1="180.3086" y2="180.3086"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="23" x="247.5" y="175.5664">sdk</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" lengthAdjust="spacing" textLength="313" x="231.5" y="212.9434">ログイン済み ー iiideaは対象のERAppletクラスのインスタンス</text><polygon fill="#444444" points="208.5,261.8848,218.5,265.8848,208.5,269.8848,212.5,265.8848" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="38.5" x2="214.5" y1="265.8848" y2="265.8848"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="104" x="45.5" y="245.832">PreferenceUIから</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="73" x="45.5" y="261.1426">iiideaに設定</text><polygon fill="#444444" points="499.5,306.5059,509.5,310.5059,499.5,314.5059,503.5,310.5059" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="310.5059" y2="310.5059"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="130" x="237.5" y="290.4531">認証セッションを更新</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="13" x="237.5" y="305.7637">（</text><text fill="#800080" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117" x="250.5" y="305.7637">これは必要ないか？</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="13" x="367.5" y="305.7637">）</text><polygon fill="#444444" points="499.5,381.748,509.5,385.748,499.5,389.748,503.5,385.748" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="385.748" y2="385.748"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="120" x="237.5" y="335.0742">Trigger Pieceの設定</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="192" x="237.5" y="350.3848">iiidea.setTriggerBlockUserPref(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="98" x="269.5" y="365.6953">triggerUserPref:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="237.5" y="381.0059">)</text><polygon fill="#444444" points="499.5,456.9902,509.5,460.9902,499.5,464.9902,503.5,460.9902" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="460.9902" y2="460.9902"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="119" x="237.5" y="410.3164">Serivce Pieceの設定</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="191" x="237.5" y="425.627">iiidea.setSerivceBlockUserPref(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="100" x="269.5" y="440.9375">serviceUserPref:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="237.5" y="456.248">)</text><polygon fill="#444444" points="499.5,532.2324,509.5,536.2324,499.5,540.2324,503.5,536.2324" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="536.2324" y2="536.2324"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="116" x="237.5" y="485.5586">Action Pieceの設定</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="188" x="237.5" y="500.8691">iiidea.setActionBlockUserPref(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="95" x="269.5" y="516.1797">actionUserPref:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="237.5" y="531.4902">)</text><path d="M235,549.2324 L235,574.2324 L641,574.2324 L641,559.2324 L631,549.2324 L235,549.2324 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><path d="M631,549.2324 L631,559.2324 L641,559.2324 L631,549.2324 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="47" x="241" y="566.8008">iiideaの</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="273" x="288" y="566.8008">アクティベート前に必ずPreference設定をする</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="65" x="561" y="566.8008">必要がある</text><polygon fill="#444444" points="208.5,612.1641,218.5,616.1641,208.5,620.1641,212.5,616.1641" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="38.5" x2="214.5" y1="616.1641" y2="616.1641"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="97" x="45.5" y="596.1113">iiideaをON(利用</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="95" x="45.5" y="611.4219">可能状態に)する</text><polygon fill="#444444" points="499.5,718.0273,509.5,722.0273,499.5,726.0273,503.5,722.0273" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="722.0273" y2="722.0273"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="91" x="237.5" y="640.7324">iiidea.activate(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="71" x="269.5" y="656.043">completion</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="193" x="301.5" y="671.3535">&lt; unauthorizedPermissionList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="145" x="301.5" y="686.6641">unauthorizedProxyList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="48" x="301.5" y="701.9746">error &gt;:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="237.5" y="717.2852">)</text><polygon fill="#444444" points="532.5,762.6484,522.5,766.6484,532.5,770.6484,528.5,766.6484" style="stroke:#444444;stroke-width:1.0;"/><polygon fill="#444444" points="722.5,762.6484,732.5,766.6484,722.5,770.6484,726.5,766.6484" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="526.5" x2="728.5" y1="766.6484" y2="766.6484"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="189" x="538.5" y="746.5957">iiideaがwebサービスとの認証が</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="117" x="538.5" y="761.9063">必要な時の処理など</text><polygon fill="#444444" points="241.5,853.2012,231.5,857.2012,241.5,861.2012,237.5,857.2012" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="235.5" x2="510.5" y1="857.2012" y2="857.2012"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="75" x="247.5" y="791.2168">completion(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="179" x="279.5" y="806.5273">unauthorizedPermissionList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="150" x="279.5" y="821.8379">tunauthorizedProxyList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="30" x="279.5" y="837.1484">error</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="247.5" y="852.459">)</text><path d="M10,872.2012 L72,872.2012 L72,879.2012 L62,889.2012 L10,889.2012 L10,872.2012 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="233.3711" style="stroke:#000000;stroke-width:2.0;" width="684" x="10" y="872.2012"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="885.7695">alt</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="510" x="87" y="884.8359">[completionのunauthorizedPermissionList / unauthorizedProxyList / errorが全てnil &lt;成功&gt;]</text><polygon fill="#444444" points="49.5,906.8223,39.5,910.8223,49.5,914.8223,45.5,910.8223" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43.5" x2="219.5" y1="910.8223" y2="910.8223"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="158" x="55.5" y="906.0801">iiideaをONしたことを通知</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="694" y1="919.8223" y2="919.8223"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="15" y="930.457">[nil以外が戻ってくる &lt;失敗&gt;]</text><path d="M235,938.7773 L235,1070.7773 L684,1070.7773 L684,948.7773 L674,938.7773 L235,938.7773 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><path d="M674,938.7773 L674,948.7773 L684,948.7773 L674,938.7773 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="393" x="241" y="956.3457">外部のwebサービスを利用する場合や、OSに位置情報などの権限を</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="195" x="241" y="971.6563">必要とする機能を利用する場合：</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="0" x="245" y="986.9668"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="329" x="257" y="1002.2773">外部Webサービス利用に必要な認証情報が足りない場合:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="362" x="273" y="1017.5879">unauthorizedProxyListとして必要な情報リストが渡される。</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="0" x="245" y="1032.8984"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="229" x="257" y="1048.209">OSから必要な権限が取れていない場合:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="396" x="273" y="1063.5195">unauthorizedPermissionListとして必要な権限リストが渡される。</text><polygon fill="#444444" points="49.5,1093.5723,39.5,1097.5723,49.5,1101.5723,45.5,1097.5723" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="43.5" x2="219.5" y1="1097.5723" y2="1097.5723"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="104" x="55.5" y="1092.8301">必要な設定を促す</text><!--MD5=[2198c70f2054f0a819c896614340abca]
@startuml
title iiideaをON(アクティベート)する
hide footbox

skinparam DefaultFontName "Noto Sans JP, Helvetica, Arial, Liberation Sans"
skinparam BackgroundColor #F2EEE6
skinparam Shadowing false
skinparam NoteBackgroundColor #F9B5AD
skinparam NodeBorderColor #F26767

skinparam sequence {
ArrowColor #444444
ActorBorderColor Black
LifeLineBorderColor #222222
LifeLineBackgroundColor White
BoxBorderColor #FFFFFF
BoxBackgroundColor #F2fEf6
GroupBackgroundColor #FFFFFF
GroupBodyBackgroundColor #F3F0F0

ParticipantBorderColor #111111
ParticipantBackgroundColor White
ParticipantFontSize 17
ParticipantFontColor #111111
BoundaryBorderColor Gray
ActorBackgroundColor #eeeeee
ActorFontColor Black

}

actor User
participant YourApp as App
participant "Riiiver\nSDK" as ERSDK
participant "Riiiver\nCloud" as Riiiver

activate App

App -> ERSDK: ERSDK.sharedInstance()
activate ERSDK
App <- - ERSDK: sdk

... ログイン済み ー iiideaは対象のERAppletクラスのインスタンス...

User -> App: PreferenceUIから\niiideaに設定
App -> ERSDK: 認証セッションを更新\n（**<color purple>これは必要ないか？</color>**）
App -> ERSDK: Trigger Pieceの設定\niiidea.setTriggerBlockUserPref(\n\ttriggerUserPref:\n)
App -> ERSDK: Serivce Pieceの設定\niiidea.setSerivceBlockUserPref(\n\tserviceUserPref:\n)
App -> ERSDK: Action Pieceの設定\niiidea.setActionBlockUserPref(\n\tactionUserPref:\n)
note right of App: iiideaの__アクティベート前に必ずPreference設定をする__必要がある

User -> App: iiideaをON(利用\n可能状態に)する
App -> ERSDK: iiidea.activate(\n\tcompletion\n\t\t< unauthorizedPermissionList,\n\t\tunauthorizedProxyList,\n\t\terror >:\n)
ERSDK <- -> Riiiver: iiideaがwebサービスとの認証が\n必要な時の処理など
App <- - ERSDK: completion(\n\tunauthorizedPermissionList,\n\ttunauthorizedProxyList,\n\terror\n)
alt completionのunauthorizedPermissionList / unauthorizedProxyList / errorが全てnil <成功>
    User <- - App: iiideaをONしたことを通知
else nil以外が戻ってくる <失敗>
    note right of App
        外部のwebサービスを利用する場合や、OSに位置情報などの権限を
        必要とする機能を利用する場合：

            外部Webサービス利用に必要な認証情報が足りない場合:
                unauthorizedProxyListとして必要な情報リストが渡される。

            OSから必要な権限が取れていない場合:
                unauthorizedPermissionListとして必要な権限リストが渡される。
    end note
    App -> User: 必要な設定を促す
end

@enduml

PlantUML version 1.2021.2(Sun Mar 07 20:10:27 JST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>