<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="974px" preserveAspectRatio="none" style="width:773px;height:974px;background:#F2EEE6;" version="1.1" viewBox="0 0 773 974" width="773px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="18" lengthAdjust="spacing" textLength="265" x="253.5" y="29.4023">iiideaをON(アクティベート)する</text><rect fill="#FFFFFF" height="58.6211" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="129.6875"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="129.6875" y2="129.6875"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="229.2637" y2="303.1953"/><rect fill="#FFFFFF" height="613.9609" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="958.1113" y2="958.1113"/><rect fill="#FFFFFF" height="37.3105" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="150.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="150.998" y2="150.998"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="229.2637" y2="303.1953"/><rect fill="#FFFFFF" height="613.9609" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="958.1113" y2="958.1113"/><rect fill="#F3F0F0" height="233.3711" style="stroke:#000000;stroke-width:2.0;" width="684" x="10" y="716.7402"/><rect fill="#F3F0F0" height="186.75" style="stroke:none;stroke-width:1.0;" width="684" x="10" y="763.3613"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="38" x2="38" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="38" x2="38" y1="303.1953" y2="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="38" x2="38" y1="344.1504" y2="967.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="225" x2="225" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="225" x2="225" y1="303.1953" y2="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="225" x2="225" y1="344.1504" y2="967.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="516" x2="516" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="516" x2="516" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="516" x2="516" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="516" x2="516" y1="303.1953" y2="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="516" x2="516" y1="344.1504" y2="967.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="734" x2="734" y1="119.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="734" x2="734" y1="188.3086" y2="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="734" x2="734" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="734" x2="734" y1="303.1953" y2="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="734" x2="734" y1="344.1504" y2="967.1113"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="14" lengthAdjust="spacing" textLength="31" x="20" y="116.7344">User</text><ellipse cx="38.5" cy="50.1992" fill="#EEEEEE" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M38.5,58.1992 L38.5,85.1992 M25.5,66.1992 L51.5,66.1992 M38.5,85.1992 L25.5,100.1992 M38.5,85.1992 L51.5,100.1992 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><rect fill="#FFFFFF" height="34.0215" style="stroke:#111111;stroke-width:1.5;" width="87" x="182" y="84.666"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="73" x="189" y="108.1016">YourApp</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="484" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="491" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="33" x="500" y="108.1016">SDK</text><rect fill="#FFFFFF" height="54.043" style="stroke:#111111;stroke-width:1.5;" width="65" x="702" y="64.6445"/><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="51" x="709" y="88.0801">Riiiver</text><text fill="#111111" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="17" lengthAdjust="spacing" textLength="49" x="710" y="108.1016">Cloud</text><rect fill="#FFFFFF" height="58.6211" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="129.6875"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="129.6875" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="129.6875" y2="129.6875"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="229.2637" y2="303.1953"/><rect fill="#FFFFFF" height="613.9609" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="220.5" y="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="220.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="230.5" x2="230.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="220.5" x2="230.5" y1="958.1113" y2="958.1113"/><rect fill="#FFFFFF" height="37.3105" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="150.998"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="150.998" y2="188.3086"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="150.998" y2="150.998"/><rect fill="#FFFFFF" height="73.9316" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="229.2637"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="229.2637" y2="303.1953"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="229.2637" y2="303.1953"/><rect fill="#FFFFFF" height="613.9609" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="511.5" y="344.1504"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="511.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="521.5" x2="521.5" y1="344.1504" y2="958.1113"/><line style="stroke:#222222;stroke-width:1.0;" x1="511.5" x2="521.5" y1="958.1113" y2="958.1113"/><polygon fill="#444444" points="499.5,146.998,509.5,150.998,499.5,154.998,503.5,150.998" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="150.998" y2="150.998"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="147" x="237.5" y="146.2559">ERSDK.sharedInstance()</text><polygon fill="#444444" points="241.5,176.3086,231.5,180.3086,241.5,184.3086,237.5,180.3086" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="235.5" x2="510.5" y1="180.3086" y2="180.3086"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="23" x="247.5" y="175.5664">sdk</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" lengthAdjust="spacing" textLength="313" x="231.5" y="212.9434">ログイン済み ー iiideaは対象のERAppletクラスのインスタンス</text><polygon fill="#444444" points="208.5,261.8848,218.5,265.8848,208.5,269.8848,212.5,265.8848" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="38.5" x2="214.5" y1="265.8848" y2="265.8848"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="104" x="45.5" y="245.832">PreferenceUIから</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="73" x="45.5" y="261.1426">iiideaに設定</text><polygon fill="#444444" points="499.5,291.1953,509.5,295.1953,499.5,299.1953,503.5,295.1953" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="295.1953" y2="295.1953"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="130" x="237.5" y="290.4531">認証セッションを更新</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" lengthAdjust="spacing" textLength="143" x="315" y="327.8301">「認証情報を更新する」参照</text><path d="M235,349.1504 L235,389.1504 L662,389.1504 L662,359.1504 L652,349.1504 L235,349.1504 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><path d="M652,349.1504 L652,359.1504 L662,359.1504 L652,349.1504 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="47" x="241" y="366.7188">iiideaの</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="273" x="288" y="366.7188">アクティベート前に必ずPreference設定をする</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="78" x="561" y="366.7188">必要がある。</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="406" x="241" y="382.0293">loadPreferences()をコール呼べばPreferenceを設定したことになる。</text><polygon fill="#444444" points="499.5,412.082,509.5,416.082,499.5,420.082,503.5,416.082" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="416.082" y2="416.082"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="107" x="237.5" y="411.3398">loadPreferences()</text><polygon fill="#444444" points="208.5,456.7031,218.5,460.7031,208.5,464.7031,212.5,460.7031" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="38.5" x2="214.5" y1="460.7031" y2="460.7031"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="97" x="45.5" y="440.6504">iiideaをON(利用</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="95" x="45.5" y="455.9609">可能状態に)する</text><polygon fill="#444444" points="499.5,562.5664,509.5,566.5664,499.5,570.5664,503.5,566.5664" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="230.5" x2="505.5" y1="566.5664" y2="566.5664"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="91" x="237.5" y="485.2715">iiidea.activate(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="71" x="269.5" y="500.582">completion</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="193" x="301.5" y="515.8926">&lt; unauthorizedPermissionList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="145" x="301.5" y="531.2031">unauthorizedProxyList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="48" x="301.5" y="546.5137">error &gt;:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="237.5" y="561.8242">)</text><polygon fill="#444444" points="532.5,607.1875,522.5,611.1875,532.5,615.1875,528.5,611.1875" style="stroke:#444444;stroke-width:1.0;"/><polygon fill="#444444" points="722.5,607.1875,732.5,611.1875,722.5,615.1875,726.5,611.1875" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="526.5" x2="728.5" y1="611.1875" y2="611.1875"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="189" x="538.5" y="591.1348">iiideaがwebサービスとの認証が</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="117" x="538.5" y="606.4453">必要な時の処理など</text><polygon fill="#444444" points="241.5,697.7402,231.5,701.7402,241.5,705.7402,237.5,701.7402" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="235.5" x2="510.5" y1="701.7402" y2="701.7402"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="75" x="247.5" y="635.7559">completion(</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="179" x="279.5" y="651.0664">unauthorizedPermissionList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="150" x="279.5" y="666.377">tunauthorizedProxyList,</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="30" x="279.5" y="681.6875">error</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="4" x="247.5" y="696.998">)</text><path d="M10,716.7402 L72,716.7402 L72,723.7402 L62,733.7402 L10,733.7402 L10,716.7402 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="233.3711" style="stroke:#000000;stroke-width:2.0;" width="684" x="10" y="716.7402"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="730.3086">alt</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="510" x="87" y="729.375">[completionのunauthorizedPermissionList / unauthorizedProxyList / errorが全てnil &lt;成功&gt;]</text><polygon fill="#444444" points="49.5,751.3613,39.5,755.3613,49.5,759.3613,45.5,755.3613" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43.5" x2="219.5" y1="755.3613" y2="755.3613"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="158" x="55.5" y="750.6191">iiideaをONしたことを通知</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="694" y1="764.3613" y2="764.3613"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="15" y="774.9961">[nil以外が戻ってくる &lt;失敗&gt;]</text><path d="M235,783.3164 L235,915.3164 L684,915.3164 L684,793.3164 L674,783.3164 L235,783.3164 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><path d="M674,783.3164 L674,793.3164 L684,793.3164 L674,783.3164 " fill="#F9B5AD" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="393" x="241" y="800.8848">外部のwebサービスを利用する場合や、OSに位置情報などの権限を</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="195" x="241" y="816.1953">必要とする機能を利用する場合：</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="0" x="245" y="831.5059"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="329" x="257" y="846.8164">外部Webサービス利用に必要な認証情報が足りない場合:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="362" x="273" y="862.127">unauthorizedProxyListとして必要な情報リストが渡される。</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="0" x="245" y="877.4375"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="229" x="257" y="892.748">OSから必要な権限が取れていない場合:</text><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="396" x="273" y="908.0586">unauthorizedPermissionListとして必要な権限リストが渡される。</text><polygon fill="#444444" points="49.5,938.1113,39.5,942.1113,49.5,946.1113,45.5,942.1113" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="43.5" x2="219.5" y1="942.1113" y2="942.1113"/><text fill="#000000" font-family="Noto Sans JP, Helvetica, Arial, Liberation Sans" font-size="13" lengthAdjust="spacing" textLength="104" x="55.5" y="937.3691">必要な設定を促す</text><!--MD5=[f70ebfdc2b7c80d72cf6d0df7db428d7]
@startuml
title iiideaをON(アクティベート)する
hide footbox

skinparam DefaultFontName "Noto Sans JP, Helvetica, Arial, Liberation Sans"
skinparam BackgroundColor #F2EEE6
skinparam Shadowing false
skinparam NoteBackgroundColor #F9B5AD
skinparam NodeBorderColor #F26767

skinparam sequence {
ArrowColor #444444
ActorBorderColor Black
LifeLineBorderColor #222222
LifeLineBackgroundColor White
BoxBorderColor #FFFFFF
BoxBackgroundColor #F2fEf6
GroupBackgroundColor #FFFFFF
GroupBodyBackgroundColor #F3F0F0

ParticipantBorderColor #111111
ParticipantBackgroundColor White
ParticipantFontSize 17
ParticipantFontColor #111111
BoundaryBorderColor Gray
ActorBackgroundColor #eeeeee
ActorFontColor Black

}

actor User
participant YourApp as App
participant "Riiiver\nSDK" as ERSDK
participant "Riiiver\nCloud" as Riiiver

activate App

App -> ERSDK: ERSDK.sharedInstance()
activate ERSDK
App <- - ERSDK: sdk

... ログイン済み ー iiideaは対象のERAppletクラスのインスタンス...

User -> App: PreferenceUIから\niiideaに設定

App -> ERSDK: 認証セッションを更新
... 「認証情報を更新する」参照 ...
note right of App: iiideaの__アクティベート前に必ずPreference設定をする__必要がある。\nloadPreferences()をコール呼べばPreferenceを設定したことになる。
App -> ERSDK: loadPreferences()
User -> App: iiideaをON(利用\n可能状態に)する
App -> ERSDK: iiidea.activate(\n\tcompletion\n\t\t< unauthorizedPermissionList,\n\t\tunauthorizedProxyList,\n\t\terror >:\n)
ERSDK <- -> Riiiver: iiideaがwebサービスとの認証が\n必要な時の処理など
App <- - ERSDK: completion(\n\tunauthorizedPermissionList,\n\ttunauthorizedProxyList,\n\terror\n)
alt completionのunauthorizedPermissionList / unauthorizedProxyList / errorが全てnil <成功>
    User <- - App: iiideaをONしたことを通知
else nil以外が戻ってくる <失敗>
    note right of App
        外部のwebサービスを利用する場合や、OSに位置情報などの権限を
        必要とする機能を利用する場合：

            外部Webサービス利用に必要な認証情報が足りない場合:
                unauthorizedProxyListとして必要な情報リストが渡される。

            OSから必要な権限が取れていない場合:
                unauthorizedPermissionListとして必要な権限リストが渡される。
    end note
    App -> User: 必要な設定を促す
end

@enduml

PlantUML version 1.2021.2(Sun Mar 07 20:10:27 JST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>